// ───────────────────────────────────────────────────────────────────────────────
// THEME TOKENS
// ───────────────────────────────────────────────────────────────────────────────
$primary: #0ea5e9;
$primary-700: #0369a1;

$bg: linear-gradient(135deg, #121212, #1c1c1c);

// Surfaces/elevation
$surface-1: rgba(255,255,255,0.04);   // list rows
$surface-2: rgba(255,255,255,0.07);   // cards
$surface-modal: rgba(17,19,24,0.95);  // modal card (nearly opaque for readability)

// Borders
$border-1: rgba(255,255,255,0.08);
$border-2: rgba(255,255,255,0.14);

// Text
$text: #f5f5f5;
$muted: #bcbcbc;
$disabled: #555;

// Common
$radius: 14px;
$shadow-lg: 0 18px 60px rgba(0,0,0,.65), 0 1px 0 rgba(255,255,255,.03) inset;


// ───────────────────────────────────────────────────────────────────────────────
// BASE
// ───────────────────────────────────────────────────────────────────────────────
* { box-sizing: border-box; }
html, body { height: 100%; }
body {
  margin: 0;
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
  background: $bg;
  color: $text;
}

// ───────────────────────────────────────────────────────────────────────────────
// HEADER
// ───────────────────────────────────────────────────────────────────────────────
.header {
  padding: 14px 20px;
  border-bottom: 1px solid $border-1;
  background: rgba(0,0,0,0.25);
  backdrop-filter: blur(6px);
  display: flex; align-items: center; justify-content: space-between;

  h1 { margin: 0; font-weight: 600; letter-spacing: .3px; }
}
.header-actions { display: inline-flex; align-items: center; gap: 8px; }

// ───────────────────────────────────────────────────────────────────────────────
// LAYOUT
// ───────────────────────────────────────────────────────────────────────────────
.main {
  max-width: 980px;
  margin: 24px auto 120px;
  padding: 0 20px;
}

.player-card {
  border: 1px solid $border-1;
  background: $surface-2;
  border-radius: $radius;
  padding: 16px;
  display: grid;
  grid-template-columns: 86px 1fr;
  grid-template-rows: auto auto auto;
  gap: 12px 16px;
}

.player-bottom {
  position: sticky; bottom: 12px; z-index: 5;
}

.artwork {
  grid-row: 1 / span 3;
  width: 86px; height: 86px;
  border-radius: 10px;
  background: radial-gradient(80% 70% at 30% 25%, #2b2b2b, #111);
  display: grid; place-items: center;
  font-size: 34px;
  border: 1px solid $border-1;
}

.meta {
  .title { font-size: 1.05rem; font-weight: 600; margin-bottom: 4px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
  .sub { color: $muted; display: flex; align-items: center; gap: 10px; }
  .dot { opacity: 0.6; }
  .buffering { display: inline-flex; align-items: center; gap: 8px; color: $muted; font-size: .9rem; }
  .spinner {
    width: 14px; height: 14px; border-radius: 50%;
    border: 2px solid transparent; border-top-color: $muted; border-right-color: $muted;
    animation: spin 0.8s linear infinite;
  }
}
@keyframes spin { to { transform: rotate(360deg); } }

.controls-row { display: flex; align-items: center; gap: 14px; flex-wrap: wrap; }

// ───────────────────────────────────────────────────────────────────────────────
// BUTTONS
// ───────────────────────────────────────────────────────────────────────────────
.btn, .icon-btn, .play-btn {
  border: 1px solid $border-1;
  background: rgba(255,255,255,0.06);
  color: $text;
  border-radius: 10px;
  padding: 10px 14px;
  cursor: pointer;
  transition: background .15s ease, transform .06s ease, border-color .15s ease;
  &:hover:not(:disabled) { background: rgba(255,255,255,0.12); }
  &:active:not(:disabled) { transform: translateY(1px); }
  &:disabled { opacity: .5; cursor: not-allowed; }
}

.icon-btn { padding: 10px 12px; font-size: 16px; }
.play-btn {
  font-size: 18px; padding: 10px 16px; background: $primary; border-color: $primary-700;
  &:hover:not(:disabled) { background: $primary-700; }
}

.transport { display: inline-flex; align-items: center; gap: 8px; }

.volume {
  margin-left: auto;
  display: inline-flex; align-items: center; gap: 10px;
  input[type="range"] { width: 120px; }
}

// ───────────────────────────────────────────────────────────────────────────────
// SLIDER / PROGRESS
// ───────────────────────────────────────────────────────────────────────────────
.progress { grid-column: 1 / -1; }
input[type="range"] {
  -webkit-appearance: none; appearance: none; width: 100%; height: 6px;
  background: linear-gradient(90deg, $primary var(--seek-fill, 0%), #3a3a3a 0%);
  border-radius: 999px; outline: none;
}
input[type="range"]::-webkit-slider-thumb {
  -webkit-appearance: none; width: 14px; height: 14px; border-radius: 50%;
  background: #fff; border: 2px solid $primary-700; margin-top: -4px;
}
input[type="range"]::-moz-range-thumb {
  width: 14px; height: 14px; border: 2px solid $primary-700;
  background: #fff; border-radius: 50%;
}

// ───────────────────────────────────────────────────────────────────────────────
// LIBRARY LIST
// ───────────────────────────────────────────────────────────────────────────────
#library-list {
  display: flex;
  flex-direction: column;
  gap: 8px;
  margin-top: 8px;
}

.track-row {
  display: grid;
  grid-template-columns: 48px 1fr auto;
  align-items: center;
  gap: 12px;
  padding: 10px;
  border: 1px solid $border-1;
  background: $surface-1;
  border-radius: 10px;
  cursor: pointer;
  transition: background .15s ease, transform .06s ease, border-color .15s ease;

  &:hover { background: rgba(255,255,255,0.08); }
  &:active { transform: translateY(1px); }
  &:focus-visible { outline: 2px solid $primary; outline-offset: 2px; }
}

.track-row .cover {
  width: 48px; height: 48px; border-radius: 8px;
  display: grid; place-items: center; border: 1px solid $border-1;
  background: radial-gradient(80% 70% at 30% 25%, #2b2b2b, #111);
  font-size: 20px; overflow: hidden;
}
.track-row .meta {
  min-width: 0;
  .t { font-weight: 600; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
  .a { font-size: .9rem; color: $muted; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
}
.track-row .dur { color: $muted; font-variant-numeric: tabular-nums; margin-left: 8px; }

// ───────────────────────────────────────────────────────────────────────────────
// FORM CONTROLS (shared)
// ───────────────────────────────────────────────────────────────────────────────
.input, input[type="text"], input[type="search"], select, textarea {
  width: 100%;
  min-height: 38px;
  padding: 8px 10px;
  border-radius: 10px;
  border: 1px solid $border-1;
  background: rgba(255,255,255,.06);
  color: $text;
  outline: none;
  transition: border-color .15s ease, box-shadow .15s ease, background .15s ease;

  &:focus {
    border-color: $primary;
    box-shadow: 0 0 0 3px rgba($primary, .18);
    background: rgba(255,255,255,.08);
  }

  &:disabled {
    color: $muted;
    background: rgba(255,255,255,.04);
    border-color: $border-1;
  }
}

label { user-select: none; }

// ───────────────────────────────────────────────────────────────────────────────
// MODAL (scrim + card)
// ───────────────────────────────────────────────────────────────────────────────
.modal {
  position: fixed;
  inset: 0;
  display: grid;
  place-items: center;
  // darker scrim for contrast + a bit of blur to separate background
  background: linear-gradient(180deg, rgba(0,0,0,.55), rgba(0,0,0,.65));
  backdrop-filter: blur(3px);
  z-index: 50;
}
.modal[hidden] { display: none; }

.modal-card {
  width: min(680px, 92vw);
  border-radius: $radius;
  border: 1px solid $border-2;
  background: $surface-modal;
  box-shadow: $shadow-lg;
  padding: 18px;
  display: grid;
  gap: 12px;

  h2 {
    margin: 0 0 6px;
    font-size: 1.25rem;
    letter-spacing: .2px;
  }

  .form-row { display: grid; gap: 8px; }
  .row { display: flex; gap: 10px; align-items: center; }
  .lbl { font-weight: 600; color: $text; opacity: .9; }
  .muted { color: $muted; font-size: .85rem; }
  .actions { display: flex; gap: 10px; justify-content: flex-end; margin-top: 6px; }
}

// ───────────────────────────────────────────────────────────────────────────────
// FAB
// ───────────────────────────────────────────────────────────────────────────────
.fab {
  position: fixed; right: 18px; bottom: 18px; z-index: 60;
  display:flex; flex-direction: column; align-items: flex-end; gap: 8px;
}
.fab-btn { @extend .play-btn; border-radius: 999px; width: 52px; height: 52px; padding: 0; font-size: 28px; }
.fab-menu { display: grid; gap: 8px; padding-bottom: 4px; }
.fab-item { @extend .btn; border-radius: 999px; }

// Chips (multi-select)
.chips { display: flex; flex-wrap: wrap; gap: 8px; }
.chip {
  border: 1px solid $border-1; background: rgba(255,255,255,0.06);
  color: $text; border-radius: 999px; padding: 6px 10px; cursor: pointer;
  font-size: .9rem; transition: background .15s ease, border-color .15s ease;
  &:hover { background: rgba(255,255,255,0.1); }
}
.chip.is-selected { background: $primary; border-color: $primary-700; color: #fff; }
